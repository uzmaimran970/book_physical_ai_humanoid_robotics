---
sidebar_position: 1
---

# تصدیق کی جانچ کی گائیڈ

یہ گائیڈ تصدیق کے نظام اور سیشن کی مستقل مزاجی کی جانچ کے لیے قدم بہ قدم ہدایات فراہم کرتی ہے۔

## پیشگی ضروریات

1. Backend سرور `http://localhost:8000` پر چل رہا ہو
2. Frontend `http://localhost:3000` پر چل رہا ہو
3. PostgreSQL database قابل رسائی ہو

## ٹیسٹ کیسز

### T050: سیشن کی مستقل مزاجی کا ٹیسٹ

یہ ٹیسٹ تصدیق کرتا ہے کہ صارف کے سیشن براؤزر بند/دوبارہ کھولنے کے چکروں میں برقرار رہتے ہیں۔

#### جانچ کے اقدامات

1. **ابتدائی سائن اپ/لاگ ان**
   - `http://localhost:3000/login` پر جائیں
   - یا تو نیا اکاؤنٹ بنائیں یا موجودہ credentials کے ساتھ لاگ ان کریں
   - کامیاب تصدیق کے بعد آپ کو ہوم پیج پر redirect کیا جانا چاہیے
   - `access_token` اور `user` keys کے لیے براؤزر localStorage کو چیک کریں:
     ```javascript
     // براؤزر DevTools Console کھولیں اور چلائیں:
     localStorage.getItem('access_token')
     localStorage.getItem('user')
     ```

2. **محفوظ Route پر جائیں**
   - نیویگیشن بار میں "Profile" پر کلک کریں
   - تصدیق کریں کہ آپ `/profile` تک رسائی حاصل کر سکتے ہیں اور اپنی اکاؤنٹ کی معلومات دیکھ سکتے ہیں
   - پروفائل پیج پر دکھائی گئی اپنی صارف کی تفصیلات نوٹ کریں

3. **براؤزر بند کریں**
   - براؤزر کو مکمل طور پر بند کریں (صرف ٹیب نہیں)
   - کم از کم 5 سیکنڈ انتظار کریں

4. **براؤزر دوبارہ کھولیں اور مستقل مزاجی کی جانچ کریں**
   - براؤزر کھولیں اور `http://localhost:3000` پر جائیں
   - AuthProvider کو خودکار طور پر موجودہ سیشن کو چیک کرنا چاہیے
   - `/profile` پر دوبارہ جائیں
   - **متوقع نتیجہ**: آپ کو اب بھی لاگ ان ہونا چاہیے اور credentials دوبارہ داخل کیے بغیر پروفائل پیج تک رسائی حاصل کرنی چاہیے

5. **ٹوکن کی میعاد ختم ہونے کی جانچ**
   - ٹوکن کی میعاد ختم ہونے کا انتظار کریں (default: 7 دن) یا localStorage میں اسے تبدیل کرکے دستی طور پر ٹوکن کو غلط بنائیں:
     ```javascript
     localStorage.setItem('access_token', 'invalid-token')
     ```
   - پیج کو refresh کریں
   - `/profile` پر جائیں
   - **متوقع نتیجہ**: آپ کو `/login` پر redirect کیا جانا چاہیے کیونکہ سیشن اب درست نہیں ہے

6. **لاگ آؤٹ کی جانچ**
   - ضرورت ہو تو دوبارہ لاگ ان کریں
   - `/profile` پر جائیں
   - "Log Out" بٹن پر کلک کریں
   - **متوقع نتیجہ**:
     - آپ کو ہوم پیج پر redirect کیا جانا چاہیے
     - localStorage صاف ہونا چاہیے
     - `/profile` تک رسائی کی کوشش کو `/login` پر redirect کرنا چاہیے

### اضافی ٹیسٹ کیسز

#### TC1: سائن اپ فلو

1. `/signup` پر جائیں یا لاگ ان پیج سے "Sign Up" پر کلک کریں
2. فارم کو بھریں:
   - درست ای میل (مثلاً `test@example.com`)
   - پورا نام (مثلاً `Test User`)
   - پاس ورڈ (کم از کم 8 حروف)
   - پاس ورڈ کی تصدیق (مماثل ہونا ضروری)
3. "Sign Up" پر کلک کریں
4. **متوقع نتائج**:
   - کوئی validation errors نہیں
   - کامیاب اکاؤنٹ کی تخلیق
   - JWT token محفوظ کے ساتھ خودکار لاگ ان
   - ہوم پیج پر redirect
   - `/profile` پر پروفائل قابل رسائی

#### TC2: لاگ ان فلو

1. `/login` پر جائیں
2. درست credentials داخل کریں
3. "Log In" پر کلک کریں
4. **متوقع نتائج**:
   - کامیاب تصدیق
   - localStorage میں JWT token محفوظ
   - localStorage میں صارف کا ڈیٹا محفوظ
   - ہوم پیج پر redirect
   - پروفائل قابل رسائی

#### TC3: ناکام لاگ ان

1. `/login` پر جائیں
2. غلط credentials داخل کریں
3. "Log In" پر کلک کریں
4. **متوقع نتیجہ**: خرابی کا پیغام دکھایا گیا ("Incorrect email or password")

#### TC4: فارم کی توثیق

**ای میل کی توثیق:**
- خالی ای میل → "Email is required"
- غلط format (مثلاً "notanemail") → "Invalid email format"

**پاس ورڈ کی توثیق (سائن اپ):**
- خالی پاس ورڈ → "Password is required"
- < 8 حروف → "Password must be at least 8 characters"
- پاس ورڈ مماثل نہیں → "Passwords do not match"

**پورے نام کی توثیق (سائن اپ):**
- خالی نام → "Full name is required"

#### TC5: محفوظ Route کی رسائی

**جب تصدیق نہیں ہوئی:**
1. localStorage صاف کریں: `localStorage.clear()`
2. `/profile` پر جائیں
3. **متوقع نتیجہ**: `/login` پر خودکار redirect

**جب تصدیق ہو گئی:**
1. کامیابی سے لاگ ان کریں
2. `/profile` پر جائیں
3. **متوقع نتیجہ**: پروفائل پیج صارف کی معلومات کے ساتھ دکھائی دیتا ہے

#### TC6: تصدیق کے ساتھ ChatWidget

1. صارف کے طور پر لاگ ان کریں
2. چیٹ widget کھولیں (نیچے دائیں کونے)
3. پیغام بھیجیں
4. **متوقع نتیجہ**:
   - تصدیق شدہ ہونے پر user_id کے ساتھ پیغام بھیجا جاتا ہے
   - چیٹ کی تاریخ صارف کے اکاؤنٹ سے منسلک ہے

## دستی جانچ کی چیک لسٹ

- [ ] نیا صارف کامیابی سے سائن اپ کر سکتا ہے
- [ ] موجودہ صارف کامیابی سے لاگ ان کر سکتا ہے
- [ ] غلط credentials مناسب خرابی دکھاتے ہیں
- [ ] تمام فیلڈز کے لیے فارم کی توثیق کام کرتی ہے
- [ ] براؤزر بند/دوبارہ کھولنے کے بعد سیشن برقرار رہتا ہے
- [ ] میعاد ختم/غلط tokens لاگ ان پر redirect کرتے ہیں
- [ ] لاگ آؤٹ سیشن صاف کرتا ہے اور صحیح طریقے سے redirect کرتا ہے
- [ ] محفوظ routes کو تصدیق کی ضرورت ہے
- [ ] تصدیق شدہ صارفین پروفائل پیج تک رسائی حاصل کر سکتے ہیں
- [ ] پروفائل پیج درست صارف کی معلومات دکھاتا ہے
- [ ] نیویگیشن مناسب لنکس دکھاتا ہے (Login/Profile)
- [ ] موبائل responsive ڈیزائن کام کرتا ہے (320px+ پر جانچیں)

## خودکار جانچ (مستقبل کی بہتری)

مستقبل کے کاموں میں شامل ہو سکتا ہے:
- Playwright/Cypress کے ساتھ E2E ٹیسٹس
- auth components کے لیے یونٹ ٹیسٹس
- auth API endpoints کے لیے integration ٹیسٹس
- سیشن کی مستقل مزاجی کے خودکار ٹیسٹس

## مسائل کا حل

### ٹوکن برقرار نہیں رہ رہا

- DevTools میں براؤزر کے localStorage کو چیک کریں (Application → Local Storage)
- تصدیق کریں کہ لاگ ان/سائن اپ کے بعد ٹوکن set ہو رہا ہے
- console میں JavaScript کی خرابیوں کو چیک کریں

### Redirect Loop

- localStorage کو مکمل طور پر صاف کریں
- پیج کو hard refresh کریں (Ctrl+Shift+R یا Cmd+Shift+R)
- متضاد تصدیق کی logic کو چیک کریں

### CORS کی خرابیاں

- یقینی بنائیں کہ backend CORS `http://localhost:3000` کے لیے configure ہے
- CORS سے متعلق خرابیوں کے لیے backend logs چیک کریں
- تصدیق کریں کہ API requests میں درست headers شامل ہیں

### 401 Unauthorized خرابیاں

- ٹوکن کی میعاد ختم ہو گئی ہو سکتی ہے (default: 7 دن)
- ٹوکن کی format غلط ہو سکتی ہے
- صارف کا اکاؤنٹ غیر فعال ہو سکتا ہے
- تفصیلی خرابی کے پیغامات کے لیے backend logs چیک کریں

## کامیابی کے معیار

✅ تمام ٹیسٹ کیسز پاس ہوں
✅ براؤزر کی دوبارہ شروعات میں سیشن برقرار رہے
✅ محفوظ routes صحیح طریقے سے تصدیق کو نافذ کریں
✅ خرابی کی ہینڈلنگ صارف دوست ہو
✅ موبائل responsive ڈیزائن کام کرے
✅ auth فلو کے دوران کوئی console errors نہ ہوں
